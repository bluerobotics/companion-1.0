paths:
  /stream/{cameraId}:
    get:
      tags:
        - stream
      summary: get camera configuration
      responses:
        200:
          description: success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/cameraConfig"
  /stream/{cameraId}/format:
    put:
      summary: Set the video device output format
      parameters:
        - in: body
        name: format
        description: set the output format for a video device (eg h264, 1080p, 30fps)
        schema:
          $ref: "camera.yaml#/components/schema/cameraFormat"
  /stream/{cameraId}/add:
    put:
      description: Add a stream configuration to the selected video device
      parameters:
        - in: path
        name: cameraId
        description: the video device to add a stream to
        - in: body
        name: stream
        description: the stream configuration to add
  /stream/{cameraId}/remove/{index}:
    put:
      description: Remove a stream configuration from the selected video device
      parameters:
        - in: path
        name: cameraId
        description: the video device to remove a stream from
        - in: path
        name: index
        description: the index of the stream configuration to remove

components:
  schemas:
    streamConfig:
      type: object
      properties:
        index:
          description: The index of this stream. A single video device may have multiple streams attributed to it.
          type: integer
          example: 0
        type:
          description: The video stream type
          type: string
          enum: [ "udp", "rtsp", "file" ]
          example: "udp"
        url:
          description: Where the stream data is sent
          type: string
          example: "192.168.2.1:5600"
    cameraConfig:
      type: object
      properties:
        device:
          type: string
          example: "/dev/video0"
        format:
          $ref: "camera.yaml#/components/schemas/cameraFormat"
        streams:
          type: array
          items:
            ref$: "#/components/schemas/streamConfig"
